



<?xml version "1.0" encoding "UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<title>XML.com: A Bright, Shiny Service: Sparklines</title>
	<meta name="keywords" content="XML.com,O'Reilly Network,oreillynet,oreillynet.com,O'Reilly,OREILLY,Instruction,Web Services,Joe Gregorio,sparklines,Python,restful web services" />
	<meta name="description" content="Joe Gregorio describes how to implement a sparklines web service and web application, and also provides Python and Javascript code for both. Very Web 2.0!" />
	<meta name="date" content="Jun. 22, 2005" />
	<meta name="pagename" content="A Bright, Shiny Service: Sparklines" />
	<meta name="site" content="XML.com" />
	<meta name="author" content="Joe Gregorio" />
	<meta name="safariu_url" content="http://www.xml.com/pub/a/2005/06/22/sparklines.html" />



<!-- feed autodiscovery links -->

<link rel="alternate" type="application/rss+xml" title="XML.com Articles and Weblogs" href="http://feeds2.feedburner.com/oreilly/xml" />

<!--

<link rel="alternate" type="application/atom+xml" title="XML.com Articles and Weblogs" href="http://www.oreillynet.com/pub/feed/20" />
<link rel="alternate" type="application/rdf+xml" title="XML.com Articles and Weblogs" href="http://www.oreillynet.com/pub/feed/20?format=rss1" />

-->

<!-- stylesheet -->
<link rel="STYLESHEET" type="text/css" href="http://www.xml.com/styles/pc-px-msie.css" />
<link rel="STYLESHEET" type="text/css" href="http://www.xml.com/styles/global.css" />
<script language="JavaScript" type="text/javascript" src="http://www.xml.com/common.js"></script>
<script language="JavaScript" type="text/javascript" src="http://www.xml.com/common.js"></script>

<!-- urchin tag -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-31074-1";
urchinTracker();
</script>

<!-- 
<script src="http://www.xml.com/__utm.js" type="text/javascript"></script>

-->

<script type="text/javascript" src="http://www.xml.com/tabber.js"></script>

<!-- additional css -->
<link rel="stylesheet" type="text/css" href="http://www.oreillynet.com/styles/articles.css" />

<!-- MyBuys libraries and style sheet -->
<link href="http://t.p.mybuys.com/css/mbstyles.css" type="text/css" rel="stylesheet" id="mybuysstyles">
<script type="text/javascript" src="http://t.p.mybuys.com/js/mybuys3.js"></script>
<script type="text/javascript" src="http://t.p.mybuys.com/clients/OREILLY/js/setup.js"></script>
<!-- End MyBuys libraries and style sheet -->

</head>
<body id="xml">
<div id="page">
<div id="header" class="noindex">


<h1><div style="padding:5px;">
<a href="/index.csp"><img src="/images/logo_tagline.jpg" width="135" height="74" border="0" hspace="0" vspace="0"  alt="XML.com: XML From the Inside Out" /></a>
</div></h1>

</div>

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td align="right" valign="bottom">
<a href="/cs/user/login?x-redirect=/cs/user/home" class="tiny">Sign In/My Account</a>&nbsp;|&nbsp;<a href="http://epoch.oreilly.com/shop/cart.orm" class="tiny">View Cart</a>&nbsp;&nbsp;</td>
</tr></table>





<div id="newHead">

<link rel="stylesheet" rev="stylesheet" href="http://www.oreillynet.com/styles/all.css" type="text/css" />
<link rel="stylesheet" rev="stylesheet" href="http://www.oreillynet.com/styles/about-121707.css" />
<link rel="stylesheet" rev="stylesheet" href="http://www.oreillynet.com/styles/store2.css" />
<link rel="stylesheet" rev="stylesheet" href="http://www.oreilly.com/styles/catalog.css" />

<div id="nav" class="noindex">
<ul>
<li><a href="http://www.oreilly.com/">O'Reilly Home</a></li>
<li><a href="http://news.oreilly.com/">Community</a></li>
<li><a href="http://www.oreilly.com/store/">Books & Videos</a></li>
<li><a href="http://safari.oreilly.com/?cid=orm-nav-global">Safari Books Online</a></li>
<li><a href="http://conferences.oreillynet.com/">Conferences</a></li>
<li><a href="http://training.oreilly.com/">Training</a></li>
<li><a href="http://www.oreillyschool.com/">School of Technology</a></li>
<li><a href="http://www.oreilly.com/about/">About</a></li>

</ul>
<div class="clear"></div>
</div><!-- /#nav -->





<link rel="stylesheet" rev="stylesheet" href="http://www.oreillynet.com/styles/all_new.css" />

<link rel="stylesheet" rev="stylesheet" href="http://www.oreillynet.com/styles/all.css" />


<link rel="stylesheet" rev="stylesheet" href="http://www.oreillynet.com/styles/main.css" />



<div id="search-box">



<b>
We've expanded our <a href="http://xml.oreilly.com">XML news coverage</a> and improved our search! </b> Search for all things XML across O'Reilly!

<br /><br />
<div id="search-box" class="yui-skin-sam">

            <form method="get" action="http://search.oreilly.com" id="search-form" name="searchfield">
                <fieldset>



                    <span id="search-title" style="color:#474747">Search</span>
                    <span id="search-input">
                        <span id="search-input-top">
                            <span id="search-input-bot">
                                <span id="search-field"><input style="//height: 25px;" id="q" name="q" type="text" maxlength="64" accesskey="s" value="" /></span>
                                <span id="search-button"><input type="image" name="submit" src="http://www.oreilly.com/images/oreilly/search_bar_btn.gif" alt="Submit" onclick="return searchverif();" /></span>
                                <span class="clear"></span>
                            </span>
    </span>
                    </span>
                            <div id="autocomplete"></div>
                   
                    <span id="search-tips"><a href="http://www.oreillynet.com/search/tips.csp" target="_blank">Search Tips</a></span>
                </fieldset>
            </form>

<br />
        </div><!-- /#search-box -->

<br />
        

</div>





</div>




<!--
<h1><csinclude record="lc/3" field="html" /></h1>
<br />
-->


<!-- tabs 
<csinclude record="lc/15" field="html" />
-->


<div id="leaderboard">
<img src="http://www.oreillynet.com/images/ads/ad-tag-vertical.gif" width="11" height="90" border="0" alt="advertisement" style="float:right;"/>

<div style="width:728px;margin:0 auto;">
<!-- ###Leaderbord here###-->
  <!-- XML Leaderboard Ad -->

<!--JavaScript Tag // Tag for network 5159: TechVertical // Website: OR - XML.com // Page: XML // Placement: ros_728x90 (425861) // created at: Oct 9, 2008 5:49:51 PM-->
<script language="javascript"><!--
document.write('<scr'+'ipt language="javascript1.1" src="http://adserver.adtechus.com/addyn/3.0/5159/425861/0/225/ADTECH;loc=100;target=_blank;key=key1+key2+key3+key4;grp=[group];misc='+new Date().getTime()+'"></scri'+'pt>');
//-->
</script><noscript><a href="http://adserver.adtechus.com/adlink/3.0/5159/425861/0/225/ADTECH;loc=300;key=key1+key2+key3+key4;grp=[group]" target="_blank"><img src="http://adserver.adtechus.com/adserv/3.0/5159/425861/0/225/ADTECH;loc=300;key=key1+key2+key3+key4;grp=[group]" border="0" width="728" height="90"></a></noscript>

<!-- End of JavaScript Tag -->

<!-- End ad -->
<!-- ###END Leaderbord###-->
</div>
</div> <!-- end leaderboard -->

<div id="colored-bar-ad" class="tinywhite" align="center" style="background-color:#cc0033;"><!-- XML Text link Ad -->

<!--JavaScript Tag // Tag for network 5159: TechVertical // Website: OR - XML.com // Page: XML // Placement: text (425860) // created at: Oct 9, 2008 5:49:53 PM-->
<script language="javascript"><!--
document.write('<scr'+'ipt language="javascript1.1" src="http://adserver.adtechus.com/addyn/3.0/5159/425860/0/16/ADTECH;loc=100;target=_blank;key=key1+key2+key3+key4;grp=[group];misc='+new Date().getTime()+'"></scri'+'pt>');
//-->
</script><noscript><a href="http://adserver.adtechus.com/adlink/3.0/5159/425860/0/16/ADTECH;loc=300;key=key1+key2+key3+key4;grp=[group]" target="_blank"><img src="http://adserver.adtechus.com/adserv/3.0/5159/425860/0/16/ADTECH;loc=300;key=key1+key2+key3+key4;grp=[group]" border="0" width="1" height="1"></a></noscript>
<!-- End of JavaScript Tag -->

<!-- End ad --></div>


<!-- </div>  end header -->
<!--
<div id="page-content">
-->

<div id="page-content" style="clear: left;">
<div id="article" style="width: 650px;">


<p>
<!-- begin content-->


<div align="center">
<!-- begin ad tag -->
<script language="JavaScript" type="text/javascript">
//<![CDATA[
var ord = (ord != null ? ord : Math.random()*10000000000000000 );
document.write('<script language="JavaScript" src="http://ad.doubleclick.net/adj/ttm.xml/art;tn=3;tw=300;th=55;to=h;tcs=0;tcp=0;ta=center;tva=bottom;tc=ffffff;tnm=3;te=1;sz=100x50;ord=' + ord + '?" type="text/javascript"><\/script>');
//]]>
</script><noscript><a href="http://ad.doubleclick.net/adj/ttm.xml/art;tn=3;tw=300;th=55;to=h;tcs=0;tcp=0;ta=center;tva=bottom;tc=ffffff;tnm=3;te=1;sz=100x50;ord=123456789?" target="_blank"><img src="http://ad.doubleclick.net/adj/ttm.xml/art;tn=3;tw=300;th=55;to=h;tcs=0;tcp=0;ta=center;tva=bottom;tc=ffffff;tnm=3;te=1;sz=100x50;ord=123456789?" width="100" height="50" border="0" alt="" /></a></noscript>
<!-- End ad tag -->
</div>
<br />

<!-- begin  print-discuss-del.icio.us options -->
<div style="margin: 0px 10px 0px 6px; float: right; width: 170px;">
<a class="print" style="font-size:90%;" title="Go to a print-friendly version of this page." href="/lpt/a/1592">Print</a>


<a class="subscribe" style="font-size:90%;" title="Subscribe" href="http://www.oreillynet.com/pub/feed/21">Subscribe to Web Services</a>



</div>
<!-- end  print-discuss-del.icio.us options -->



<!-- ISI_LISTEN_START -->
<span class=ISI_MESSAGE><!--  This article is brought to you by XML.com, your source for all XML news.  --></span>  
<!-- content here -->

<h2>A Bright, Shiny Service: Sparklines</h2>
<div style="clear: left;">by <a href="/pub/au/225">Joe Gregorio</a></div>
<div>June 22, 2005</div><br clear="all" />







	<!-- mega preparse mp: -->


      

<p><!-- XML MPU Ad -->

<!-- End ad -->
<!-- me -->
I really was working
on <a href="http://www.xml.com/pub/a/2005/06/08/restful.html">the bookmark
web service</a>&mdash;really, I was!&mdash;but I got distracted. What
grabbed my attention was Sparklines.</p>

        <h3 id="What_are_Sparklines_3F">What are Sparklines?</h3>

        <p>Sparklines,
                as <a
                href="http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0001OR&amp;topic_id=1&amp;topic=">
                defined by Edward Tufte</a>, are intense, simple
                word-sized graphics. They are small graphics embedded
                within a context of words or numbers. They are
                described in a chapter, which he's published on the
                Web, of his soon to be released book <em>Beautiful
                Evidence</em>. That article has been up for a while,
                but looking at the number of new links to it per month
                as recorded by Technorati
            <img src="/2005/06/22/graphics/spark_004.gif" width="24" height="15" alt=""
            title="1,0,0,0,0,1,1,1,4,6,5" /> <span style="color:
            red;">0</span> <span style="color: blue;">6</span> you can
            see that interest is ramping up. That little graph showing
            the links per month is a sparkline.
        </p>

        <p>The <a
href="http://bitworking.org/projects/sparklines/">BitWorking Sparkline
Generator</a> is my contribution to the Web 2.0: it's a web service,
web application, and the source code to both. It's also the subject of
this article. </p>
<!-- sidebar begins -->
<!-- don't move sidebars-->
<!-- sidebar ends -->


        <h3 id="Drawing_Sparklines_in_Python">Drawing Sparklines in Python</h3>

        <p>Sparklines are useful for presenting a large volume of
information in a small space using a context sensitive manner. I have
test routines that I run regularly and the volume of output can be
tremendous. I stumbled onto sparklines and found they are a great way
to ease the information overload. I started drawing sparklines in
Python using
the <a href="http://www.pythonware.com/products/pil/">Python Imaging
Library</a>. It is easy to get started with a basic template and then
modify the code. Here are some examples: </p>

        <pre><code>import Image, ImageDraw
import StringIO

def plot_sparkline(results):
  &quot;&quot;&quot;Returns a sparkline image as a data: URI.
     The source data is a list of values between
     0 and 100. Values greater than 95
     are displayed in red, otherwise they are displayed
     in green&quot;&quot;&quot;

  im = Image.new(&quot;RGB&quot;, (len(results)*2, 15), 'white')
  draw = ImageDraw.Draw(im)
  for (r, i) in zip(results, range(0, len(results)*2, 2)):
      color = (r &gt; 50) and &quot;red&quot; or &quot;gray&quot;
      draw.line((i, im.size[1]-r/10-4, i, (im.size[1]-r/10)), fill=color)
  del draw

  f = StringIO.StringIO()
  im.save(f, .gif&quot;)
  return f.getvalue()
        </code></pre>

        <p>This will produce a sparkline that looks like this: </p>
        <p>
            <img src="/2005/06/22/graphics/spark_007.gif" width="61" height="15" alt="" />
        </p>
        <p>This
is just one kind of plot; it's not that much work to create a different
kind of sparkline, for example, one of the continuous plots:</p>
        <p>
            <img src="/2005/06/22/graphics/spark_002.gif" width="64" height="15" alt="" />
        </p>
        <p>The code for the image above is the following: </p>
<pre><code>def plot_sparkline2(results):
   im = Image.new(&quot;RGB&quot;, (len(results)+2, 20), 'white')
   draw = ImageDraw.Draw(im)
   coords = zip(range(len(results)), [15 - y/10 for y in results])
   draw.line(coords, fill=&quot;#888888&quot;)
   end = coords[-1]
   draw.rectangle([end[0]-1, end[1]-1, end[0]+1, end[1]+1], fill=&quot;#FF0000&quot;)
   del draw 

   f = StringIO.StringIO()
   im.save(f, .gif&quot;)
   return f.getvalue()
</code></pre>
        <p>A note about the limitations of what we can do. We aren't going to reproduce Galileo's drawings of the moons of Jupiter<span>, nor are we going to get the resolution that can be achieved on paper.</span>
        </p>
        <p>
            <a href="http://www2.jpl.nasa.gov/galileo/ganymede/discovery.html">
                <img alt="The Discovery of the Galilean Satellites" src="/2005/06/22/graphics/galileo.gif" width="425" height="53" />
            </a>
        </p>
        <p>On
the other hand, we can exploit the advantages of the platform of our
choice. We can put info or raw data into the &quot;title&quot; attribute of the
image.  Putting the raw data into the &quot;title&quot; attribute of the
image causes the raw data to be displayed when the mouse hovers over
the image. Here is how it looks in FireFox:</p>
            <p>
                <img alt="A popup showing the raw data that informs a sparkline." src="/2005/06/22/graphics/hover.gif" width="500" height="52" />
            </p>
        <p>We
can also make the sparkline clickable, either making the entire image a
link, or using an image map to make parts of the sparkline lead to
further resources. </p>


        <h3 id="Spreading_the_Joy_via_Web_Services">Spreading the Joy via Web Services</h3>

        <p>Now hacking Python is fun, but it's not for everyone. Let's
            open this up for everyone to use. First, we'll start by
            creating a web service. What else did you expect me to
            do?</p>
        <p>For simple sparklines we can use query parameters to pass
        the data into a CGI application that draws the
        sparkline. Let's start by reviewing
        with <a
        href="http://www.xml.com/pub/a/2004/12/01/restful-web.html">the
        four questions we ask when building any web service</a>:</p>
        <ol>
            <li>
                <b>What are the resources?</b>  The resources are
sparklines. To specify how each sparkline will appear we can pass in
the data via query parameters. Our sparkline code only takes one
parameter, a list of data with values between 0 and 100. That data can
be passed in by a query parameter <code>d</code> whose value is a
comma separated list of values between 0 and 100. For
example: <code>http://bitworking.org/projects/sparklines/spark.cgi?d=10,20,30,40</code>.
            </li>
            <li>
                <b>What are their representations?</b> The
                representations can be in an image format:.gif, GIF,
                JPEG or maybe even SVG.
            </li>
            <li>
                    <b>What methods do those resources support?</b> GET 
            </li>
            <li>
                <b>What errors could be generated?</b> 4XX if the
                parameters passed in don't correspond to data that can
                be graphed.
            </li>
        </ol>
        <p>Now remember our follow-up questions about GETs. Is our use
            of GETs both safe and idempotent? Retrieving an image is
            certainly safe, and doing so multiple times still returns
            the same image, so we are using GET correctly.
        </p>
        <p>Here is a first pass at an implementation of our web
          service. Note that this is <strong>not</strong> the service
          I deployed, it is a much simpler version used here just for
          exposition:</p>

<pre><code>#!/usr/bin/env python
import cgi 
import cgitb 
import sys 
import os 
 
cgitb.enable() 
 
import Image, ImageDraw 
import StringIO 
import urllib 
 
 
def plot_sparkline(f, results): 
  &quot;&quot;&quot;Returns a sparkline image as a data: URI.
     The source data is a list of values between
     0 and 100. Values greater than 95
     are displayed in red, otherwise they are displayed
     in green&quot;&quot;&quot;
  im = Image.new(&quot;RGB&quot;, (len(results)*2, 15), 'white')
  draw = ImageDraw.Draw(im)
  for (r, i) in zip(results, range(0, len(results)*2, 2)):
     color = (r &gt; 50) and &quot;red&quot; or &quot;gray&quot;
     draw.line((i, im.size[1]-r/10-4, i, (im.size[1]-r/10)), fill=color)
  del draw
 
  im.save(f, .gif&quot;)
 
def plot_error(f): 
  im = Image.new(&quot;RGB&quot;, (40, 15), 'white')
  draw = ImageDraw.Draw(im)
  draw.line((0, 0) + im.size, fill=&quot;red&quot;)
  draw.line((0, im.size[1], im.size[0], 0), fill=&quot;red&quot;)
  del draw
  im.save(f, .gif&quot;)
 
def error(status=&quot;Status: 400 Bad Request&quot;): 
   print &quot;Content-type: image.gif&quot;
   print status
   print &quot;&quot;
   plot_error(sys.stdout)
   sys.exit()
 
def cgi_param(form, name, default): 
   return form.has_key(name) and form[name].value or default
 
if not os.environ['REQUEST_METHOD'] in ['GET', 'HEAD']: 
   error(&quot;Status: 405 Method Not Allowed&quot;)
form = cgi.FieldStorage() 
raw_data = cgi_param(form, 'd', '') 
if not raw_data: 
   error()
data = [int(d) for d in raw_data.split(&quot;,&quot;) if d] 
if min(data) &lt; 0 or max(data) &gt; 100: 
   error()
 
print &quot;Content-type: image.gif&quot; 
print &quot;Status: 200 Ok&quot; 
print &quot;&quot; 
plot_sparkline(sys.stdout, data)         </code></pre>

        <p>There are a few noteworthy points:</p>
        <dl>
            <dt>Errors </dt>
            <dd>If some of the parameters are missing, or incorrect,
we return an error message that is the same type as a successful
response, that is, we return a big red X as a .gif to indicate that
there was an error. That's because our service will be used to serve
up images that will most likely appear in web pages via the
&lt;img/&gt; element. This way if an error occurs there will be
visible feedback by the appearance of a large red X. </dd>
            <dt>Methods </dt>
            <dd>Note that we manually restrict our handling of HTTP
                methods to those of just GET and HEAD.  If we don't do
                this, then our web service will also respond to POST
                methods. That's because our query parameter parsing
                library is a little too helpful and will handle POSTed
                data in an indistinguishable manner from GET
                requests. In this case it's not really that damaging,
                but imagine if the tables had been turned and we had
                created a service that should only respond to
                POST. Unless we check the incoming method ourselves
                then our service would gleefully accept both GET and
                POST requests and treat them as the same.  That can
                lead
                to <a
                href="http://37signals.com/svn/archives2/google_web_accelerator_hey_not_so_fast_an_alert_for_web_app_designers.php">ugly</a> <a href="http://www.intertwingly.net/blog/2005/03/16/AJAX-Considered-Harmful">problems,</a> particularly if we settled on using POST because the action taken wasn't idempotent or safe.
            </dd>
        </dl>
            <h4 id="Full_Web_Service_Description">Full Web Service Description</h4>
        <p>Here is a full description of the web service as it is deployed today:
        </p>

        <pre>            <code>http://bitworking.org/projects/sparklines/spark.cgi</code>
        </pre>

        <table border="1" cellspacing="0">
            <caption>Common Parameters</caption>
            <tbody><tr> <th>Parameter</th>    <th>Description</th> </tr>
            <tr> <td>d</td>            <td>The data for the plot. All data values must be between 0 and 100. </td></tr>

            <tr> <td>height</td>       <td>The height of the image in pixels.</td></tr>
            <tr> <td>type</td>         <td>&quot;discrete&quot; - One vertical bar per data point. <br />
                    &quot;smooth&quot; - all the points plotted as a continuous line.</td></tr>
        </tbody></table>

        <p>If the <tt>type</tt> is &quot;smooth&quot; then the following parameters apply:</p>

        <table border="1" cellspacing="0">
            <caption>&quot;Smooth&quot; Parameters</caption>
            <tbody><tr> <th>Parameter</th>    <th>Description</th> </tr>

            <tr> <td>min-m</td>            <td>If set to 'true', then place a special marker at the smallest value in the data set. </td></tr>
            <tr> <td>max-m</td>            <td>If set to 'true', then place a special marker at the largest value in the data set. </td></tr>
            <tr> <td>last-m</td>            <td>If set to 'true', then place a special marker at the last value in the data set. </td></tr>

            <tr> <td>min-color</td>            <td>The color of the marker placed at the smallest value in the data set. </td></tr>
            <tr> <td>max-color</td>            <td>The color of the marker placed at the largest value in the data set. </td></tr>
            <tr> <td>last-color</td>            <td>The color of the marker placed at the last value in the data set. </td></tr>

            <tr> <td>step</td>       <td>The points are to be plotted every n'th pixel.</td></tr>
        </tbody></table>

        <p>If the <tt>type</tt> is discrete then the following parameters apply:</p>

        <table border="1" cellspacing="0">

            <caption>&quot;Discrete&quot; Parameters</caption>
            <tbody><tr> <th>Parameter</th>    <th>Description</th> </tr>
            <tr> <td>upper</td>        <td>Data values â‰¥ upper will be plotted in the <code>above-color</code>, otherwise data points will 
                    be plotted in the <code>below-color</code>. </td>

            </tr>
            <tr> <td>above-color</td>        <td>The color for data points â‰¥ <code>upper</code>. </td></tr>
            <tr> <td>below-color</td>        <td>The color for data points &lt; <code>upper</code>. </td></tr>

        </tbody></table>

        <p>Here are some example sparklines and their URIs to get you started.</p>

        <table border="1" cellspacing="0">
            <caption><b><i>Examples</i></b></caption>
            <tbody><tr> <th>Sparkline</th>  <th>URI</th> </tr>

            <tr>
                <td><img src="/2005/06/22/graphics/spark_006.gif" width="24" height="20" alt="" /> </td>
                <td> <code>http://bitworking.org/projects/sparklines/spark.cgi? type=smooth&amp;d=10,20,30,90,80,70&amp;step=4</code>
            </td></tr>

            <tr>
                <td><img src="/2005/06/22/graphics/spark_005.gif" width="24" height="20" alt="" /> </td><td>
                    <code>http://bitworking.org/projects/sparklines/spark.cgi?
  type=smooth&amp;d=10,20,30,90,80,70&amp;step=4&amp;min-m=true&amp;max-m=true</code>
                </td>
            </tr>

            <tr>
                <td><img src="/2005/06/22/graphics/spark_003.gif" width="11" height="14" alt="" /> </td><td> 
                    <code>http://bitworking.org/projects/sparklines/spark.cgi?
  type=smooth&amp;d=10,20,30,90,80,70</code>
                </td>
            </tr>

        </tbody></table>

<!-- article_sidebar2.view begins -->

<div align="center">
<div style="width:70%;border-top:1px solid #8d8d8d;border-bottom:1px solid #8d8d8d;margin:0.5em 0;padding:0.5em 0;">

<table width="70%" border="0" cellspacing="0" cellpadding="0" align="center">

<tr>
<td valign="top" width="50%" align="center">



<a href="http://oreilly.com/catalog/9780596006426/index.html"><img src="http://www.oreillynet.com/catalog/covers/059600642X_cat.gif" alt="Real World Web Services" border="0" hspace="20" /></a>
</td>
<td valign="top" width="50%"><p class="headline">Related Reading</p>
<p class="medlist"><span class="title"><a href="http://oreilly.com/catalog/9780596006426/index.html?CMP=ILL-4GV796923290">Real World Web Services</a></span><strong><br />

Integrating EBay, Google, Amazon, FedEx and more<br />

By <a href="http://www.oreillynet.com/pub/au/1079">Will Iverson</a></strong>
</p>
<div class="secondary">
<!-- builds links to list in sidebar -->
<!--csperl>
    my @links = split(/(?:\r?\n)+/, ( $DATA{"supporting_links"} || "" ));
    for my $link ( @links ) {
	my ( $name, $url ) = split /=/, $link, 2;	
	next unless $name and $url;
	$url = "http://oreilly.com/catalog/$DATA{'reference'}/$url" unless $url =~ /^\w+:/os;
$url = $url . "?CMP=ILL-4GV796923290";
        if ($name eq "Table of Contents") {
           print qq~ <a href="$url">$name</a><br /> \n ~;
        } elsif ($name =~ /Table of Contents/) {
           print qq~ <a href="$url">$name</a><br /> \n ~;
        } elsif ($name =~ /Index/) {
           print qq~ <a href="$url">$name</a><br /> \n ~;
        } elsif ($name eq "Author's Article") {
           print qq~ <a href="$url">$name</a><br /> \n ~;
        } elsif ($name =~ /Sample Chapter/) {
           print qq~ <a href="$url">$name</a><br /> \n ~;
        } else {
           print qq~\n~;
        }
    }
</csperl-->

</div>
</td>
</tr>
</table>
</div>
</div>
<!-- article_sidebar2.view ends -->

		
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td><p class="secondary">


Pages: <b>1</b>, <a href="/pub/a/2005/06/22/sparklines.html?page=2">2</a>
</p></td><td><p class="secondary" align="right">
<a href="/pub/a/2005/06/22/sparklines.html?page=2">
Next Page<img src="/images/blue-arrow.gif" border="0" alt="arrow" width="10" height="12" hspace="2" vspace="0" align="baseline">
</a></p></td></tr></table>






<!-- end content -->
<!-- ISI_LISTEN_STOP -->


<!-- talk back -->
<a name="thread"></a>


<br /><br />


<!-- end content -->

<!-- horizontal ad -->


</div><!-- #article -->

<div class="noindex">
<div id="related" style="font:12px verdana,arial,helvetica,sans-serif;">


<!-- MyBuys Zone and Parameters -->
<div class="sidebar-item">
<h3>Recommended for You</h3>
<div class="sidebar-item-content" style="text-align: center; padding: 0px;">
<!-- MyBuys Web Recommendation Zone -->
<div mybuyszone="5"></div>
<!-- End MyBuys Web Recommendation Zone -->
<!-- MyBuys Page Parameters -->
<script type="text/javascript">
mybuys.setPageType("CONTENT_ITEM");
mybuys.set("categoryid","http://purl.oreilly.com/resource-center/xml");
</script>
</div>
</div>


<!-- HireReach Widget -->

<div style="text-align:center; padding-bottom:20px;">


<script type='text/javascript'><!--//<![CDATA[ 
var m3_u = (location.protocol=='https:')?'https://jobs.hrkspjbs.com/js.ashx':'http://jobs.hrkspjbs.com/js.ashx'; 
var m3_r = Math.floor(Math.random()*99999999999); 
document.write ("<sc"+"ri"+"pt type='text/javascript' src='"+m3_u); 
document.write ("?pid=2B9C484E4C084CE1A90E33EB9CE8FE7B"); 
document.write ("&amp;tl=" + m3_r); 
document.write ("&amp;did=a1592"); 
document.write ("&amp;loc=" + escape(window.location)); 
if (document.referrer) document.write ("&amp;referer=" +
escape(document.referrer)); 
if (document.context) document.write ("&context=" +
escape(document.context)); 
document.write ("'></sc"+"ri"+"pt>");
//]]>--></script>



</div>

<!-- sponsored developer resources
<csperl file="grab" domain="on" record="sc/1851" field="html">

$self->include("csinclude", {record => "$table/$ref_id", template => "tagged_articles.view"});
-->


<div style="text-align:center;background-color:#eee;padding-top:10px;padding-bottom:10px;">
<img src="/images/ads/advertisement.gif" alt="Advertisement" style="padding-bottom:5px;" />


<div align="center">

<!-- Stylus Ad and Sponsored Zones -->

<!-- Progress Software -->

<!--
<csperl>
## code to insert ad tag 
my $pathinfo = $cfg->{PATH_INFO} || $cgi->path_info();
my ($junk,$table,$ref_id) = split /\//, $pathinfo, 3;
## ads, here only on article pages and not on the wixml pages
if ($ref_id) {
  if ($ref_id !~ /^\d+$/) {
    $ref_id = "/$ref_id";
  }
}

my $f = new CS::Form( cfg => $cfg, table => "$table", id => "$ref_id" );
        unless ($f->{r}->{ARGS}->{'adcode'} eq 'wixml') {
  	          my %ARGS = ( 'co'     => 'dc',
                               'pos'    => 'l',
		               'height'	=> "240",
		               'width'	=> "120",
                               'page'   => "home",
);
           $id_subject = $f->{r}->{ARGS}->{'id_subject'} ;
              #if ($id_subject =~ /10/) {
              #       $ARGS{'page'} = 'databases';
              #}
              #if ($id_subject =~ /3/) {
              #       $ARGS{'page'} = 'mobile';
              #}
if ($pathinfo =~ /^\/a\/\//) {
    $ARGS{'page'} = 'art';
}
#if ($pathinfo =~ /^\/databases\//) {
#    $ARGS{'page'} = 'databases';
#}
#if ($pathinfo =~ /^\/mobile\//) {
#    $ARGS{'page'} = 'mobile';
#}
if ($pathinfo =~ /^\/resourceguide\//) {
    $ARGS{'co'} = 'none';
}
if ($pathinfo =~ /^\/buyersguide\//) {
    $ARGS{'co'} = 'none';
}
if ($pathinfo =~ /\/pt\// ) {
   $ARGS{'co'} = 'none';
}
if ($pathinfo =~ /\/r\// ) {
   $ARGS{'co'} = 'none';
}
if ($pathinfo =~ /\/p\// ) {
   $ARGS{'co'} = 'none';
}
if ($pathinfo =~ /\/rg\// ) {
   $ARGS{'co'} = 'none';
}


my $ad = new CS::Ad( cfg => $self->{cfg}, params => \%ARGS );

	             print $ad->AdTag;
         }

</csperl>
!-->



<!-- ### textbox start ###-->
<div class="adtag " style=""><!-- dy -->
<!-- begin ad tag -->
<script language="JavaScript" type="text/javascript">
//<![CDATA[
var ord = (ord != null ? ord : Math.random()*10000000000000000 );
document.write('<script language="JavaScript" src="http://ad.doubleclick.net/adj/ttm.oreillynet/textbox;sz=$widthx$height;tile=1;ord=' + ord + '?" type="text/javascript"><\/script>');
//]]>
</script><noscript><a href="http://ad.doubleclick.net/jump/ttm.oreillynet/textbox;sz=$widthx$height;tile=1;ord=3906016063?" target="_blank"><img src="http://ad.doubleclick.net/ad/ttm.oreillynet/textbox;sz=$widthx$height;ord=123456789?" width="$width" height="$height" border="0" alt="" /></a></noscript>
<!-- End ad tag -->
</div>



<!-- ### end textbox###-->


<br />



<!-- sponsors -->
<!-- ### skyscraper start ###-->
    <!-- XML Skyscraper Ad -->


<!--JavaScript Tag // Tag for network 5159: TechVertical // Website: OR - XML.com // Page: XML // Placement: ros_160x600 (425862) // created at: Oct 9, 2008 5:49:49 PM-->
<script language="javascript"><!--
document.write('<scr'+'ipt language="javascript1.1" src="http://adserver.adtechus.com/addyn/3.0/5159/425862/0/154/ADTECH;loc=100;target=_blank;key=key1+key2+key3+key4;grp=[group];misc='+new Date().getTime()+'"></scri'+'pt>');
//-->
</script><noscript><a href="http://adserver.adtechus.com/adlink/3.0/5159/425862/0/154/ADTECH;loc=300;key=key1+key2+key3+key4;grp=[group]" target="_blank"><img src="http://adserver.adtechus.com/adserv/3.0/5159/425862/0/154/ADTECH;loc=300;key=key1+key2+key3+key4;grp=[group]" border="0" width="160" height="600"></a></noscript>

<!-- End of JavaScript Tag -->

<!-- end ad -->
<!-- ### end skyscraper ###-->
</div>
</div>

</div><!-- #related -->
</div><!-- end noindex -->


</div><!-- #page-content -->

<!-- footer -->

<div style="clear:right;"></div>




<br clear="all">

<div id="footer" class="noindex">

<!-- Start Quantcast tag -->

<script type="text/javascript" src="http://edge.quantserve.com/quant.js"></script>
<script type="text/javascript">
_qacct="p-20l78bOOCbhcg";quantserve();</script>
<noscript>
<img src="http://pixel.quantserve.com/pixel/p-20l78bOOCbhcg.gif" style="display: none" height="1" width="1" alt="Quantcast"/></noscript>

 <!-- End Quantcast tag -->

<table border="0" style="padding-top:20px; padding-bottom:20px;">
<tr><td align="left" width="25%" valign="top" style="padding-left: 20px; padding-right: 20px;">
<a href="http://oreilly.com/"><img height="35" border="0" width="155" src="http://cdn.oreilly.com/images/standard/oreilly-logo-footer.gif" alt="O'Reilly Media"/></a>
<br/><br/>
&copy;2010, O'Reilly Media, Inc.<br/>(707) 827-7000 / (800) 998-9938<br/> All trademarks and registered trademarks appearing on oreilly.com are the property of their respective owners. </td>

<td valign="top" class="footercol1">
<ul>
<li><a href="http://oreilly.com/about/"><strong>About O'Reilly</strong></a></li>

<li><a href="http://oreilly.com/academic/">Academic Solutions</a></li>
<li><a href="http://oreilly.com/contact.html">Contacts</a></li>
<li><a href="http://oreilly.com/oreilly/cs/">Customer Service</a></li>
<li><a href="http://oreilly.com/jobs/">Careers</a></li>
<li><a href="http://press.oreilly.com/">Press Room</a></li>
<li><a href="http://oreilly.com/oreilly/privacy.csp">Privacy Policy</a></li>
<li><a href="http://oreilly.com/terms/">Terms of Service</a></li>
<li><a href="http://oreilly.com/oreilly/author/intro.csp">Writing for O'Reilly</a></li>
</ul>

</td>

<td valign="top" class="footercol2">
<ul>
<li><a href="http://oreilly.com/community/"><strong>Community</strong></a></li>
<li><a href="http://oreilly.com/authors/">Authors</a></li>
<li><a href="http://forums.oreilly.com/">Forums</a></li>
<li><a href="https://members.oreilly.com/">Membership</a></li>
<li><a href="http://elists.oreilly.com/">Newsletters</a></li>
<li><a href="http://oreilly.com/feeds/">RSS Feeds</a></li>
<li><a href="http://ug.oreilly.com/">User Groups</a></li>

</ul>
</td>

<td valign="top" class="footercol3">
<ul>
<li><strong>More O'Reilly Sites</strong></li>
<li><a href="http://igniteshow.com/">igniteshow.com</a></li>
<li><a href="http://makerfaire.com/">makerfaire.com</a></li>
<li><a href="http://makezine.com/">makezine.com</a></li>
<li><a href="http://craftzine.com">craftzine.com</a></li>
<li><a href="http://labs.oreilly.com">labs.oreilly.com</a></li>

</ul>

<ul>
<li><strong>Partner Sites</strong></li>
<li><a href="https://www.x.com/community/ppx/devzone">PayPal Developer Zone</a></li>
<li><a href="http://insideria.com">InsideRIA</a></li>
<li><a href="http://www.forbes.com/oreillyinsights/">O'Reilly Insights on Forbes.com</a></li>
</ul>
</td>
</tr>
</table>


<!-- For maximum performance, place these tags at the bottom of the body section of the page(s) containing this search form.  -->
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/yui/2.6.0/build/utilities/utilities.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/yui/2.6.0/build/datasource/datasource-min.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/yui/2.6.0/build/autocomplete/autocomplete-min.js"></script>
<script type="text/javascript" src="//content.atomz.com/sp1003bcf0/publish/autocomplete_data.js?sp_js_cache_ver=3"></script>

</div><!-- /#footer -->

<!-- MyBuys Page Initialization -->
<script type="text/javascript">
mybuys.initPage();
</script>
<!-- End MyBuys Page Initialization -->

<!-- path_info: /a/2005/06/22/sparklines.html -->
<!-- table: a - ref_id: /2005/06/22/sparklines.html -->
<!-- table: a - ref_id: /2005/06/22/sparklines.html -->
<!-- table: a - ref_id: /2005/06/22/sparklines.html - cs_rid: 1592 -->
<!-- 0 domain: www.xml.com - path_info: a/2005/06/22/sparklines.html -->
<!-- 1 domain: www.xml.com - path_info: a/2005/06/22/sparklines.html -->
<!-- 2 domain: www.xml.com - path_info: a/2005/06/22/sparklines.html -->
<!-- 3 domain: www.xml.com - path_info: a/2005/06/22/sparklines.html -->
<!-- 4 domain: xml.com - path_info: a/2005/06/22/sparklines.html -->
<!-- 5 domain: xml - path_info: a/2005/06/22/sparklines.html -->
<!-- 6 domain: xml - path_info: a/2005/06/22/sparklines.html s_channel: network -->
<!-- 7 domain: xml - path_info: a/2005/06/22/sparklines.html -->
<!-- 8 domain: www.xml.com - path_info: a/2005/06/22/sparklines.html -->

<script language="JavaScript" type="text/javascript"><!--
var s_account="ornetwork,orglobal"
//--></script>
<!-- SiteCatalyst code version: H.20.2. Copyright 1997-2009 Omniture, Inc. More info available at http://www.omniture.com  -->
<script language="JavaScript" type="text/javascript" src="http://assets.oreilly.com/js/s_code.js"></script>
<script language="JavaScript" type="text/javascript"><!--
s.pageName="network:xml:a bright, shiny service sparklines"
s.channel="network"
s.prop1="network:xml"
s.prop2="network:xml"
s.prop3="network:xml"
s.prop4="article"
s.prop5="a bright, shiny service sparklines"
s.prop6="x/a/1592"
s.prop24="06/22/2005"
s.prop21="joe gregorio"
s.hier1="network,xml"
/************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
var s_code=s.t();if(s_code)document.write(s_code)//--></script>
<!-- End SiteCatalyst code version: H.20.2. -->
<!-- analytics.pl: 2010/12/17 11:45:53 -->





</div></body> <!-- /#page -->


</html>

